<div class="fixed top-4 right-4 z-50 space-y-2 w-80 md:w-96">
  @for (toast of toasts(); track $index) {
    <div
      class="relative p-3 flex gap-3 border-b-4 rounded shadow text-toast-typo-1 text-xs md:text-sm mb-2 bg-white"
      [@slideIn]
      [class]="toast.actions ? 'items-start' : 'items-center'"
      [ngClass]="{
        'border-b-green-600': toast.type === 'success',
        'border-b-red-600': toast.type === 'error',
        'border-b-blue-600': toast.type === 'info',
        'border-b-yellow-500': toast.type === 'warning',
      }"
    >
      @if (toast.triggerBy) {
        <img
          [src]="toast.triggerBy.imageSrc"
          alt="profile-pic-of-{{ toast?.triggerBy?.name }}"
          class="rounded-full w-12 h-12"
        />
      }

      <div class="flex flex-col gap-2">
        <div class="flex flex-col gap-1">
          <p class="capitalize">
            {{ toast.title }}
          </p>
          @if (toast.message) {
            <p class="text-muted">
              {{ toast.message }}
            </p>
          }
        </div>

        @if (toast.actions?.length) {
          <div class="flex items-center gap-4">
            @for (action of toast.actions; track $index) {
              <button
                class="px-3 py-1 rounded-md capitalize text-white"
                [class]="$first ? '' : 'border-2'"
                [ngClass]="{
                  'bg-green-600': toast.type === 'success' && $first,
                  'bg-red-600': toast.type === 'error' && $first,
                  'bg-blue-600': toast.type === 'info' && $first,
                  'bg-yellow-500': toast.type === 'warning' && $first,

                  'text-green-600  border-green-600': toast.type === 'success' && !$first,
                  'text-red-600 border-red-600': toast.type === 'error' && !$first,
                  'text-blue-600 border-blue-600': toast.type === 'info' && !$first,
                  'text-yellow-600 border-yellow-500': toast.type === 'warning' && !$first,
                }"
                (click)="action.onClick()"
              >
                {{ action.label }}
              </button>
            }
          </div>
        }
      </div>

      <app-button
        title="Close Toast"
        variant="tertiary"
        customStyles="absolute right-5 top-2 !p-1 w-0"
        (clickEvent)="removeToast(toast.id)"
        ><lucide-icon [img]="icons.X" [size]="13" color="#000"
      /></app-button>
    </div>
  }
</div>
